<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 101 Tutorial</title>
        <script type="text/javascript" src="../d3/d3.v7.js"></script>
    </head>
    <body>
        <div class="svg2"></div>
        <div class="svg1"></div>
        <div class="svg3"></div>
        
        <script type="text/javascript">
            var dataset = [];  						 //Initialize empty array
			for (var i = 0; i < 20; i++) {			 //Loop 25 times
				var newNumber = Math.floor(Math.random() * 30);  //New random number: any integer between 0 or 29
				dataset.push(newNumber);			 //Add new number to array
			}
            //padding between bars for the barchart
            var barPadding = 1;
            //width and height variables
            var w = 800; 
            var h = 200;
            //padding variable - i.e. margins - for scatterplot
            var padding = 20;

            //Creating SVG element
            var svg2 = d3.select(".svg2")
                    .append("svg")
                    .attr("width",w)
                    .attr("height",h);
            
            //Drawing svg barchart
            svg2.selectAll("rect")
                    .data(dataset)
                    .enter()
                    .append("rect")
                    .attr("x", function(d,i) {
                        return i * ( w / dataset.length); // evenly-spaced horizontal position/ordering based on svg's width
                    })
                    .attr("y",function(d) { //top of each bar depending on svg's height
                        return h - (d * 4);
                    })
                    .attr("width", w / dataset.length - barPadding) //even spaces between bars
                    .attr("height", function(d) { //magnifying the bars' heights a little bit
                        return d * 4;
                    })
                    .attr("fill", function(d) {//function to encode the data values as color
                        return "rgb(0,0,"+ Math.round(d*10)+")";
                    });
            
            //Adding annotations 
            svg2.selectAll("text")
                    .data(dataset)
                    .enter()
                    .append("text")
                    .text(function(d) {
                            return d;
                    })
                    .attr("text-anchor", "middle")
                    .attr("x", function(d, i) {
                            return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
                    })
                    .attr("y", function(d) {
                            return h - (d * 4) + 14;
                    })
                    .attr("font-family", "sans-serif")
                    .attr("font-size", "11px")
                    .attr("fill", "white");  
            //Creating SVG element
            var svg1 = d3.select(".svg1")
                    .append("svg")
                    .attr("width",w)
                    .attr("height",h);
            //Drawing svg circles
            svg1.selectAll("circle")
                    .data(dataset)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d, i) {
                        return (i * 50) + 25;
                    })
                    .attr("cy", h/2)
                    .attr("r", function(d) {
                        return d;
                    });
            //Dynamic, random dataset for scatterplot
            var dataset2 = [];          //Initialize empty array
            var numDataPoints = 50;     //Number of dummy data points to create
            var xRange = Math.random() * 1000;  //Max range of new x values
            var yRange = Math.random() * 1000;  //Max range of new y values
            for (var i = 0; i < numDataPoints; i++) {  //Loop numDataPoints times
                var newNumber1 = Math.floor(Math.random() * xRange); //New random integer
                var newNumber2 = Math.floor(Math.random() * yRange); //New random integer
                dataset2.push([newNumber1, newNumber2]); //Add new number to array
            }

            //Create scale functions
            var xScale = d3.scaleLinear()
								 .domain([0, d3.max(dataset2, function(d) { return d[0]; })])
								 .range([padding, w - padding * 2]);

			var yScale = d3.scaleLinear()
								 .domain([0, d3.max(dataset2, function(d) { return d[1]; })])
								 .range([h - padding, padding]);

			var aScale = d3.scaleSqrt()
								 .domain([0, d3.max(dataset2, function(d) { return d[1]; })])
								 .range([0, 10]);
            //Define X axis
            var xAxis = d3.axisBottom()
                .scale(xScale)
                .ticks(5);
            //Define Y axis
            var yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5);

            
            //Create svg element
            var svg3 = d3.select(".svg3")
						.append("svg")
						.attr("width", w)
						.attr("height", h);
            //Draw scatterplot
			svg3.selectAll("circle")
			   .data(dataset2)
			   .enter()
			   .append("circle")
			   .attr("cx", function(d) {
			   		return xScale(d[0]);
			   })
			   .attr("cy", function(d) {
			   		return yScale(d[1]);
			   })
			   .attr("r", function(d) {
			   		return aScale(d[1]);
			   });
            
            //Create X axis
            svg3.append("g")
               .attr("class", "axis")
               .attr("transform", "translate(0,"+(h - padding)+")")
               .call(xAxis);
            //Create Y axis
            svg3.append("g")
               .attr("class", "axis")
               .attr("transform", "translate("+ padding+",0)")
               .call(yAxis);
        </script>
    </body>
</html>